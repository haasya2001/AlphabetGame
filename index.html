<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alphabet Game</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body class="bg-light text-center p-3">
    <div class="container">
        <h1>Alphabet Game</h1>
        <div class="my-4">
            <button id="generateLetter" class="btn btn-primary">Generate Letter</button>
            <h2 id="currentLetter" class="my-3"></h2>
        </div>
        <div>
            <h3 id="turn">Turn: Player 1</h3>
            <input type="text" id="wordInput" class="form-control my-2" placeholder="Enter your word">
            <button id="submitWord" class="btn btn-success">Submit Word</button>
        </div>
        <div id="history" class="mt-4">
            <h4>History</h4>
            <ul class="list-group" id="historyList"></ul>
        </div>
    </div>

    <script>
        document.getElementById("generateLetter").addEventListener("click", () => {
            axios.post("/generate-letter")
                .then(response => {
                    const letter = response.data.letter;
                    document.getElementById("currentLetter").innerText = `Letter: ${letter}`;
                    document.getElementById("wordInput").value = "";
                })
                .catch(err => console.error(err));
        });

        document.getElementById("submitWord").addEventListener("click", () => {
            const word = document.getElementById("wordInput").value.trim();
            axios.post("/submit-word", { word })
                .then(response => {
                    const nextPlayer = response.data.next_player;
                    const history = response.data.history;
                    document.getElementById("turn").innerText = `Turn: ${nextPlayer}`;
                    document.getElementById("historyList").innerHTML = history
                        .map(item => `<li class="list-group-item">${item.player}: ${item.word}</li>`)
                        .join("");
                    document.getElementById("wordInput").value = "";
                })
                .catch(err => {
                    if (err.response && err.response.data.error) {
                        alert(err.response.data.error);
                    } else {
                        console.error(err);
                    }
                });
        });
    </script>
</body>
</html>
